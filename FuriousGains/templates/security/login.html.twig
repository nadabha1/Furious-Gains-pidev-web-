{% extends 'base.html.twig' %}
{% block bar  %}

    <nav class="navbar navbar-expand-lg bg-none navbar-dark py-3">
        <a href="" class="navbar-brand">
            <img class="w-25"  src="{{ asset ('img/logo2.png')}}" alt="Image">
        </a>
        <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-between" id="navbarCollapse">
            <div class="navbar-nav ml-auto p-4 bg-secondary">
                <a href="{{path('homee')}}" class="nav-item nav-link active">Home</a>
                <a href="{{asset('../feature.html.twig')}}" class="nav-item nav-link">Produit</a>
                <a href="class.html" class="nav-item nav-link">Evenement</a>
                <a href="{{path('app_livraison_index')}}" class="nav-item nav-link">livraison</a>
                <div class="nav-item dropdown">
                    <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Nutritioin</a>
                    <div class="dropdown-menu text-capitalize">
                        <a href="blog.html" class="dropdown-item">Regime</a>
                        <a href="single.html" class="dropdown-item">Recette</a>
                    </div>
                </div>
                <a href="contact.html" class="nav-item nav-link">Blog</a>


                {% if app.user %}
                    <div class="mb-3">
                        You are logged in as {{ app.user.userIdentifier }}, <a href="{{ path('app_logout') }}">Logout</a>
                    </div>
                {% endif %}
                <a href="#" id="toggle-login" class="nav-item nav-link toggle-login ">Join Now<i ></i></a>
            </div>
        </div>
    </nav>
    {% if error %}
        <div class="alert alert-danger">{{ error.messageKey|trans(error.messageData, 'security') }}</div>
    {% endif %}
{% endblock %}
    {% block class%}
    {% endblock %}
    {%block about %}
    {% endblock %}

{% block features %}

{% endblock %}
    {%block gymf%}

        <div class="row pt-12">
            <div class="col-lg-6">
                <form action="{{ path('search_product') }}" method="GET" class="d-flex">
                    <input type="text" name="keyword" class="form-control me-2" placeholder="Rechercher un produit...">
                    <button type="submit" class="btn btn-primary">Rechercher</button>
                </form>
            </div>
            <div class="col-lg-6">
                <form action="{{ path('search_product') }}" method="GET" class="d-flex align-items-center">
                    <label for="priceRange" class="form-label me-2">Sélectionnez la plage de prix en DT:</label>
                    <input type="range" name="minPrice" id="minPrice" class="form-range me-2" min="0" max="500" step="10" value="{{ app.request.query.get('minPrice') ?? '0' }}">
                    <input type="range" name="maxPrice" id="maxPrice" class="form-range me-2" min="0" max="500" step="10" value="{{ app.request.query.get('maxPrice') ?? '500' }}">
                    <span id="minPriceLabel" class="me-2">{{ app.request.query.get('minPrice') ?? '0' }}</span>
                    <span>  </span>
                    <span id="maxPriceLabel" class="me-2">{{ app.request.query.get('maxPrice') ?? '500' }}</span>
                    <button type="submit" class="btn btn-primary">Filtrer</button>
                </form>
            </div>

            <script>
                const minPrice = document.getElementById('minPrice');
                const maxPrice = document.getElementById('maxPrice');
                const minPriceLabel = document.getElementById('minPriceLabel');
                const maxPriceLabel = document.getElementById('maxPriceLabel');

                // Met à jour les valeurs de prix affichées lorsque l'utilisateur modifie les curseurs
                minPrice.addEventListener('input', function() {
                    minPriceLabel.textContent = this.value;
                });

                maxPrice.addEventListener('input', function() {
                    maxPriceLabel.textContent = this.value;
                });
            </script>

        </div>
        <div class="row">
            {% for produit in produits %}
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="card custom-card" style="background-color: white;">
                        <a href="{{ path('details_produit', {'id': produit.getIdProduit()}) }}" class="card-link">
                            <div class="card-body text-center">
                                <h5 class="card-text">{{ produit.getMarqueProduit() }}</h5>

                                <img src="{{ asset('img/' ~ produit.getImageName()) }}" class="card-img-top img-product" alt="Product Image">
                                <p class="card-text">Price: {{ produit.getPrixProduit() }} TD </p>
                                <a href="{{ path('details_produit', {'id': produit.getIdProduit()}) }}" class="btn btn-primary">Ajouter au panier</a>
                            </div>
                        </a>
                    </div>
                </div>
            {% else %}
                <div class="col">
                    <p>No products found!</p>
                </div>
            {% endfor %}
        </div>

        {# Pagination #}
        <div class="row justify-content-center">
            <div class="col-auto">
                {{ knp_pagination_render(produits) }}
            </div>
        </div>

        <script src="{{ asset('js/core/jquery.min.js') }}"></script>
        <script src="{{ asset('js/core/popper.min.js') }}"></script>
        <script src="{{ asset('js/core/bootstrap.min.js') }}"></script>
        <script src="{{ asset('js/plugins/perfect-scrollbar.jquery.min.js') }}"></script>
        <!-- Google Maps Plugin -->
        <!-- Place this tag in your head or just before your close body tag. -->
        <script src="{{ asset('https://maps.googleapis.com/maps/api/js?key=YOUR_KEY_HERE') }}"></script>
        <!-- Chart JS -->
        <script src="{{ asset('js/plugins/chartjs.min.js') }}"></script>
        <!-- Notifications Plugin -->
        <script src="{{ asset('js/plugins/bootstrap-notify.js') }}"></script>
        <!-- Control Center for Black Dashboard: parallax effects, scripts for the example pages etc -->
        <script src="{{ asset('js/black-dashboard.min.js?v=1.0.0') }}"></script>
        <!-- Black Dashboard DEMO methods, don't include it in your project! -->
        <script src="{{ asset('demo/demo.js') }}"></script>
    {% endblock %}

    {%block subscribe%}
    {% endblock %}

    {%block cal%}

    {% endblock %}

    {%block t%}
    {% endblock %}

    {%block blog%}
    {% endblock %}


{% block login%}
    <!-- Inclure les fichiers CSS -->

    <style>
        .hidden {
            display: none;
        }
        .hide
        {
            display: none;
        }

    </style>

    <section id="LoginCard" class="LoginCard slide-out-blurred-bottom hide ">
        <div class="container">
            <div class="row full-height justify-content-center">
                <div class="col-12 text-center align-self-center py-5">
                    <div class="section pb-5 pt-5 pt-sm-2 text-center">
                        <h6 class="sectioninfo mb-0 pb-3"><span>Log In </span></h6>
                        <label for="reg-log"></label>
                        <div class="card-3d-wrap mx-auto">
                            <div class="card-3d-wrapper">
                                <form class="card-front " method="POST"  >

                                    <div class="center-wrap">
                                        <div class="section">
                                            <h4 class="h4login mb-4 pb-3">Log In</h4>
                                            {% for flashMessage in app.session.flashBag.get('error') %}
                                                <div class="alert alert-danger">
                                                    {{ flashMessage }}
                                                </div>
                                            {% endfor %}
                                            <a href="#" id="closebtn-signin"><i class="icon-close uil uil-times-circle"></i></a>
                                            <div class="form-group">
                                                <input type="email" value="{{ last_username }}"  name="email" class="form-style" placeholder="Your Username" id="inputEmail"  >
                                                <i class="input-icon uil uil-at"></i>
                                            </div>
                                            <div class="form-group mt-2">
                                                <input type="password" name="password" class="form-style" placeholder="Your Password" id="inputPassword"  >
                                                <i class="input-icon uil uil-lock-alt"></i>
                                            </div>

                                            <input type="hidden" name="_csrf_token"
                                                   value="{{ csrf_token('authenticate') }}"
                                            >
                                            <div class="form-group">
                                                <div class="custom-control custom-checkbox small">
                                                    <input type="checkbox" class="custom-control-input"
                                                           id="customCheck"
                                                           name="_remember_me">
                                                    <label class="custom-control-label" for="customCheck">Remember
                                                        Me</label>


                                            <button class="btn btn-lg btn-primary" type="submit">
                                                Sign in
                                            </button>

                                            <p class="mb-0 mt-4 text-center">
                                                <a class="small" href="{{ path('app_forgot_password_request')}}" >Forgot Password</a>
                                            </p>
                                            <div class="text-center">
                                                <a class="small" href="{{ path('app_register') }}">Create an Account!</a>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

{% endblock %}
